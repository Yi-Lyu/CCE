# CCE 客户端待办事项

> **更新日期**: 2025-11-13
> **当前版本**: v0.1.0-alpha

---

## 🔥 高优先级（本周完成）

### 配置编辑器完善
- [ ] **服务添加对话框** (2-3小时)
  - [ ] 创建 `ServiceDialog` 组件
  - [ ] 实现表单验证（ID、URL、API Key）
  - [ ] 角色选择下拉框（evaluator/executor）
  - [ ] supports_thinking 开关
  - [ ] 保存后刷新服务列表
  - **文件**: `internal/ui/service_dialog.go` (新建)

- [ ] **服务编辑对话框** (1-2小时)
  - [ ] 加载现有服务数据到表单
  - [ ] 编辑保存逻辑
  - **复用**: `ServiceDialog` 组件

- [ ] **服务删除确认** (1小时)
  - [ ] 确认对话框（Fyne Dialog）
  - [ ] 检查依赖（是否在 difficulty_mapping 中使用）
  - [ ] 删除后更新配置

### Bug 修复
- [ ] **端口占用检测** (1小时)
  - [ ] 启动前检查端口 27015 是否被占用
  - [ ] 提供清晰的错误提示
  - [ ] 建议用户修改端口或终止占用进程
  - **文件**: `internal/service/manager.go`

- [ ] **日志级别过滤修复** (2小时)
  - [ ] 实现 JSON 日志解析
  - [ ] 精确过滤日志级别
  - **文件**: `internal/logger/parser.go` (新建)

---

## 🎯 中优先级（下周完成）

### 日志功能增强
- [ ] **JSON 日志解析** (3-4小时)
  - [ ] 定义 `LogEntry` 结构体
  - [ ] 实现 `ParseLogLine()` 函数
  - [ ] 错误处理（解析失败时显示原始文本）
  - [ ] 单元测试
  - **文件**: `internal/logger/parser.go`

- [ ] **日志格式化显示** (2-3小时)
  - [ ] 彩色日志（根据级别）
  - [ ] 列对齐（时间、级别、消息）
  - [ ] 可展开查看详细信息
  - **文件**: `internal/ui/logs_view.go`

- [ ] **日志搜索** (3-4小时)
  - [ ] 搜索输入框
  - [ ] 关键词高亮
  - [ ] 正则表达式支持
  - [ ] 搜索历史记录
  - **文件**: `internal/ui/logs_view.go`

- [ ] **日志导出** (2小时)
  - [ ] 导出为文本文件
  - [ ] 导出为 JSON 文件
  - [ ] 按时间范围导出

### 性能监控实现
- [ ] **数据收集模块** (4-5小时)
  - [ ] 解析日志文件
  - [ ] 提取统计数据（请求数、成功/失败、延迟）
  - [ ] 难度分布统计
  - [ ] 按时间段分组
  - **文件**: `internal/logger/stats.go` (新建)

- [ ] **图表绘制** (6-8小时)
  - [ ] 难度分布饼图
  - [ ] 请求趋势折线图
  - [ ] 响应延迟柱状图
  - **依赖**: Fyne Canvas 或第三方图表库

- [ ] **/status 接口集成** (1-2小时)
  - [ ] 调用代理服务 `/status` 接口
  - [ ] 显示当前配置摘要
  - [ ] 显示服务健康状态

---

## 📅 低优先级（未来计划）

### 开机自启动
- [ ] **macOS LaunchAgent** (4-6小时)
  - [ ] plist 文件模板
  - [ ] 生成 plist 到 `~/Library/LaunchAgents/`
  - [ ] launchctl 命令集成
  - [ ] 启用/禁用开关
  - **文件**: `internal/autostart/launchd.go`

### 通知中心
- [ ] **macOS 通知** (3-4小时)
  - [ ] 请求通知权限
  - [ ] 服务状态变化通知
  - [ ] 错误告警通知
  - [ ] 通知点击跳转到主界面

### 配置管理增强
- [ ] **配置模板** (2-3小时)
  - [ ] 官方 API 模板
  - [ ] 第三方 API 模板（智谱清言、通义千问）
  - [ ] 导入模板功能

- [ ] **配置导入/导出** (2小时)
  - [ ] 导出为 YAML 文件
  - [ ] 从文件导入配置
  - [ ] 导入前验证

- [ ] **配置备份/恢复** (3小时)
  - [ ] 自动备份（每次保存前）
  - [ ] 配置历史记录（最近 10 个）
  - [ ] 一键恢复

### 多语言支持
- [ ] **i18n 框架** (4-6小时)
  - [ ] 集成 go-i18n 库
  - [ ] 英文翻译
  - [ ] 语言切换按钮

### 自动更新
- [ ] **版本检查** (3-4小时)
  - [ ] 检查 GitHub Releases
  - [ ] 版本比较逻辑
  - [ ] 更新提示

- [ ] **自动下载和安装** (6-8小时)
  - [ ] 下载新版本 .app
  - [ ] 自动替换旧版本
  - [ ] 重启应用

### UI/UX 改进
- [ ] **自定义图标** (2-3小时)
  - [ ] 设计 CCE 图标（512x512）
  - [ ] 生成 .icns 文件
  - [ ] 替换临时图标

- [ ] **窗口自适应** (2小时)
  - [ ] 响应式布局
  - [ ] 最小窗口尺寸限制
  - [ ] 记住窗口大小和位置

- [ ] **深色模式** (3-4小时)
  - [ ] 跟随系统主题
  - [ ] 主题切换按钮

---

## 🐛 已知 Bug

### 紧急
- [ ] **端口占用未检测** (高)
  - **描述**: 启动服务前未检查端口，导致错误信息不明确
  - **影响**: 用户体验差
  - **预计修复**: 1小时

### 重要
- [ ] **日志过滤不准确** (中)
  - **描述**: `containsLevel()` 函数实现过于简单
  - **影响**: 过滤结果可能不正确
  - **预计修复**: 2小时（需实现 JSON 解析）

### 一般
- [ ] **System Tray 图标不更新** (低)
  - **描述**: Fyne v2.5.4 限制，图标状态变化不实时
  - **影响**: 需要重新打开菜单才能看到变化
  - **解决方案**: 等待 Fyne 更新或寻找替代方案

---

## 🎨 UI/UX 改进

### 短期
- [ ] 错误提示更友好（详细的错误描述和建议）
- [ ] 加载状态指示器（启动服务时显示 Loading）
- [ ] 按钮禁用状态的视觉反馈

### 长期
- [ ] 动画效果（状态切换、页面切换）
- [ ] 键盘快捷键支持
- [ ] 拖拽排序（服务列表）
- [ ] 暗色模式支持

---

## 📝 文档任务

- [ ] **API 文档** (2-3小时)
  - [ ] GoDoc 注释完善
  - [ ] 生成 HTML 文档

- [ ] **用户手册** (4-6小时)
  - [ ] 功能说明（带截图）
  - [ ] 常见问题 FAQ
  - [ ] 故障排查指南

- [ ] **开发者指南** (2-3小时)
  - [ ] 架构设计说明
  - [ ] 添加新功能的步骤
  - [ ] 代码审查清单

- [ ] **视频教程** (6-8小时)
  - [ ] 安装和配置
  - [ ] 基本使用
  - [ ] 高级功能

---

## 🧪 测试

### 单元测试
- [ ] `internal/service/manager_test.go`
  - [ ] TestStart()
  - [ ] TestStop()
  - [ ] TestRestart()
  - [ ] TestHealthCheck()

- [ ] `internal/config/manager_test.go`
  - [ ] TestLoad()
  - [ ] TestSave()
  - [ ] TestValidate()

- [ ] `internal/logger/parser_test.go` (待创建)
  - [ ] TestParseLogLine()
  - [ ] TestInvalidJSON()

### 集成测试
- [ ] 端到端测试（启动 → 配置 → 启动服务 → 验证）
- [ ] 配置文件损坏恢复测试
- [ ] 服务崩溃恢复测试

### 性能测试
- [ ] 日志文件大文件读取性能（10MB+）
- [ ] 内存占用测试（长时间运行）
- [ ] CPU 占用测试

---

## 🚀 发布任务

### v0.2.0-alpha 准备
- [ ] 完成高优先级任务
- [ ] 修复所有紧急 Bug
- [ ] 更新 CHANGELOG.md
- [ ] 更新版本号（FyneApp.toml、README）
- [ ] 创建 Git Tag
- [ ] 打包 .app 文件
- [ ] 测试安装流程

### v1.0.0 准备
- [ ] 完成所有核心功能
- [ ] 100% 测试覆盖
- [ ] 完整文档
- [ ] 用户手册
- [ ] 视频教程
- [ ] GitHub Release 发布

---

## 📊 进度追踪

### 总体进度
- **已完成**: Phase 1 基础框架（100%）
- **进行中**: Phase 2A 配置编辑器完善（10%）
- **计划中**: Phase 2B 日志功能增强（0%）
- **计划中**: Phase 3 性能监控（0%）
- **计划中**: Phase 4 高级功能（0%）

### 代码统计
- **总行数**: ~1,400 行（v0.1.0-alpha）
- **文件数**: 16 个
- **待添加**: ~2,000 行（预计 v0.2.0）

---

## 🤝 协作

### 需要帮助的任务
- [ ] UI/UX 设计（应用图标、界面优化）
- [ ] 图表库调研（Fyne Canvas vs 第三方库）
- [ ] macOS 打包和签名（Developer ID）
- [ ] 英文翻译校对

### 欢迎贡献
如果你想参与开发，请：
1. Fork 仓库
2. 创建功能分支
3. 提交 Pull Request

---

## 📞 反馈

遇到问题或有建议？
- 提交 Issue: https://github.com/Yi-Lyu/Claude-Code-Exchange/issues
- 发送邮件: your.email@example.com

---

**最后更新**: 2025-11-13
